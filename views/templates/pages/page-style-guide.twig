{# Global Style Guide available at /style-guide #}
{% extends "base.twig" %}

{% block header %}
{% endblock %}
{% block footer %}
{% endblock %}

{% block content %}
  {% set section_title_classes = "h2 mb-xs" %}
  {% set section_description_classes = "body-xl" %}
  {% set block_title_classes = "h3 mb-xs" %}
  {% set block_description_classes = "body-sm max-w-[900px] mb-sm" %}
  {% set limited_message = "*Available on limited pages." %}

  <span class="hidden justify-end justify-start md:ts-grid-col-3 md:ts-grid-col-4"></span>
  <div class="relative" id="page-style-guide">
    {# Menu#}
    <div class="styleguide-nav ts-bg-white">
      <div class="pt-base text-gray-dk">
        <h1 class="h4 pl-sm pt-xs pb-xs">Styleguide</h1>
        <div class="">
          <ul>
            {% set nav_classes = "body-base-bold bg-gray-100 block pl-sm py-xs rounded-md hover:underline
          focus:underline underline-offset-2" %}
            {% set subnav_classes = "body-xs block pl-lg py-xs hover:underline focus:underline underline-offset-2" %}
            <li><a href="/style-guide#elements" class="{{ nav_classes }}">Global Elements</a></li>
            <ul>

              {# ATOM LINKS #}
              {#  @todo replace hardcoded arrays with a twig function to pull all files from
              styleguide-sections/foundation/#}
              {% set elements = [
                "color-all",
                "color-bg",
                "colorways",
                "typography",
                "spacing",
                "grids"
              ] %}
              {% for element in elements %}
                <li><a href="/style-guide#{{ element }}" class="{{ subnav_classes }}">
                    {{ element|replace({'-':" "})|capitalize }}
                  </a></li>
              {% endfor %}

            </ul>
            <ul>
              <li><a href="/style-guide#components" class="{{ nav_classes }}">Atoms & Molecules</a></li>
              {% set atoms = [
                "buttons-&-links",
                "inputs",
              ] %}
              {% for atom in atoms %}
                <li><a href="/style-guide#{{ atom }}" class="{{ subnav_classes }}">
                    {{ atom|replace({'-':" "})|capitalize }}
                  </a></li>
              {% endfor %}
              {# COMPONENT LINKS #}
              {#  @todo replace hardcoded arrays with a twig function to pull all files from
              styleguide-sections/atoms/#}
              {% set molecules = [
                "cards",
                "section-title"
              ] %}
              {% for molecule in molecules %}
                <li><a href="/style-guide#{{ molecule }}" class="{{ subnav_classes }}">
                    {{ molecule|replace({'-':" "})|capitalize }}
                  </a></li>
              {% endfor %}
            </ul>

            {# GLOBAL BLOCKS #}
            <li><a href="/style-guide#blocks--global" class="{{ nav_classes }}">Blocks (global)</a></li>
            <ul>
              {# Blocks auto generate nav items and same page links to the block on the page #}
              {% for block in ts_blocks %}
                {# Removes "acf/" from block name #}
                {% set block_name = block.name[4:]  %}
                <li><a href="/style-guide#{{ block_name }}" class="{{ subnav_classes }}">{{
                    block_name|replace({'-': " "})|capitalize }}
                  </a></li>
              {% endfor %}
              <li><a href="/style-guide#people-cards" class="{{ subnav_classes }}">People Cards</a></li>
            </ul>
          </ul>
        </div>
      </div>
    </div>

    <div class="styleguide-menu-padding">

      {# FOUNDATION #}
      <div class="py-block xl:container p-site" id="elements">
        <h2 class="{{ section_title_classes }}">Global Elements</h2>
        <p class="{{ section_description_classes }}">The "Foundations" section outlines the color tokens, typography
          styles, grids, and spacing rules used throughout the design system.
        </p>
      </div>

      {% for element in elements %}
        <div class="my-block xl:container p-site" id="{{ section }}">
          {% include "/organisms/styleguide-sections/_elements/" ~ element ~ ".twig" %}
        </div>
      {% endfor %}

      {# ATOMS & MOLECULES #}
      <div class="pt-block xl:container p-site" id="components">
        <h2 class="{{ section_title_classes }}">Atoms & molecules</h2>
        <p class="{{ section_description_classes }}">The “Atoms & Molecules” section outlines larger UI elements
          throughout the design system including buttons, inputs, dropdowns, and cards that display a variety of
          content. These elements are present within the larger blocks or sections of your page builder.
        </p>
      </div>

      {% for atom in atoms %}
        <div class="my-block xl:container p-site" id="{{ atom }}">
          <h2 class="{{ block_title_classes }}">{{ atom|capitalize }}</h2>
          {% include "/organisms/styleguide-sections/atoms/" ~ atom ~ ".twig" %}
        </div>
        <hr class="{{ hr_classes }}">
      {% endfor %}

      {% for molecule in molecules %}
        <div class="my-block xl:container p-site" id="{{ molecule }}">
          <h2 class="{{ block_title_classes }}">{{ molecule|capitalize }}</h2>
          {% include "/organisms/styleguide-sections/molecules/" ~ molecule ~ ".twig" %}
        </div>
        <hr class="{{ hr_classes }}">
      {% endfor %}

      {# Global blocks #}
      <div class="py-block-sm" id="blocks--global">
        <div class="p-site xl:container">
          <h2 class="{{ section_title_classes }}">Blocks (global)</h2>
          <p>Blocks available on all pages. They can be used to build entire page layouts in dynamic ways.</p>
        </div>
      </div>

      {# Displays all custom Blocks #}
      {% for block in ts_blocks %}
        {% if block.title %}
          {% set block_name = block.name|replace({'acf/': ''}) %}
          <div class="py-block-sm" id="{{ block_name }}">
            <div class="p-site xl:container">
              <h2 class="{{ block_title_classes }}">{{ block.title }}</h2>
              <p class="{{ block_description_classes }}">{{ block.description }}</p>
            </div>
            <div class="xl:container p-site my-block ts-bg-lt">
              {% include "/organisms/blocks/" ~ block_name ~ "/" ~ block_name ~ "-example.twig" %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
      <div class="py-block-sm" id="people-cards">
        <div class="p-site xl:container">
          <h2 class="{{ block_title_classes }}">People cards</h2>
          <p class="{{ block_description_classes }}">{{ block.description }}</p>
        </div>
        <div class="xl:container p-site my-block ts-bg-lt">
          {% include "/organisms/blocks/people-cards/people-cards-example.twig" %}
        </div>
      </div>
      <hr class="{{ hr_classes }}">

    </div>
  </div>
{% endblock %}
